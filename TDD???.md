개요
2018.09.19 ~ 20 에 있었던 TDD 워크샵을 통해 IntelliJ 소스 리팩토링한 내역들을 기억/정리하기 위함..

# IntelliJ로 소스 리팩토링하기
## 테스트코드 작성하기  
### 테스트코드 작성 전 주의사항 및 숙지사항
#### 작은 범위부터 전체 coverage로
모든 작업은 작은 것부터 점점 확장해 나가는 방식으로 수행한다. 작은 작업부터 큰 작업으로 점점 범위를 확장시켜 나가는 것이 가장 직관적이고 좋은 방법.  
테스트하고자 하는 모듈 내지는 클래스의 가장 기본적인 동작(특별한 경우가 아닌 이상 클래스의 '생성자' 를 호출하여 객체생성을 하는 경우) 부터 시작하여 전체적인 틀을 잡는다.  
- 테스트 최소단위가 '메소드'가 아닌 클래스의 가장 기본적인 '동작' 임에 집중하자. '동작'을 기준으로 테스트를 하며, 모든 커버리지를 커버하도록 테스트를 하다보면, 자연스레 사용되지 않는 메소드도 걸러내지게 된다.  
#### 1분 단위로 테스트를 할 수 있는 범위로
코드의 리팩토링은 어마어마한 시간을 내서 하는 대규모 작업이 아니라, 점진적으로 코드의 구조를 바꾸어나가는 작업의 연속이다.  
TDD 방식으로 개발과 테스트를 지속하며, 중복된 로직을 합치고 코드스멜을 줄여나가는 작업을 동시에 수행하는 것이 베스트.  
물론 소스의 수정범위 또한, 대형수정 후 일괄 테스트를 돌리는 것이 아닌, 1분 단위로, 컴파일오류없이 테스트를 돌릴 수 있는 수준으로 작게 작게 수정을 가한다.
#### 텍스트 에디팅은 되도록 지양
IntelliJ나, Eclipse 모두 좋은 Refactor 내장 기능을 갖고 있다.  
코드 수정 과정에서 로직의 오류를 최소화하거나, 들이는 시간을 최소한으로 하기 위해 가급적 텍스트 직접 에디팅은 하지 않는것이 좋다.  
  
  
## 테스트코드 작성해 보기
간단한 예제를 통하여 본다.... 워크샵 강의떄 배웠던 내용.

> 100개의 문이 있다. 이 문들은 초기상태는 모두 '닫혀있는' 상태이다. 너는 이 100개의 문을 다 'pass'해야 하는 과제를 수행해야 한다. 첫 'pass'는, 모든 문을 방문하면서 문의 상태를 토글(닫혀있다면 열고, 열려있다면 닫고)한다. 두번째 'pass'는, 2,4,6,8.... 과 같이 'pass'의 배수에 해당하는 문만 방문하면서 문의 상태를 토글한다. 같은 세번째 'pass'에서는, 3,6,9,12.... 과 같이 3의 배수에 해당하는 문만 방문하며 문의 상태를 토글하고, 이 반복을 100번째 'pass'까지 진행한다. 이 때, 100개의 문을 100번째 'pass'까지 수행한 후의 모든 문의 상태는?


### 문제 인식
가장 작은 동작의 단위부터 시작.  
100개의 문과 100번의 'pass'가 아닌, 우선 1개의 문을 가지고 작은 영역부터 문제를 해결해 나간다.  
(사실 우리가 실제 구현하고 해결해야 하는 일련의 서비스로직 내지는 비즈니스 로직은, 문 100개를 100번 pass하는 그런 요구사항이 주어져, 직관적으로 동작을 쪼갤 수 있는 것을 생각해 낼 수 있는 성질의 것이 아니긴 하다....결국 문제 인식과, 전체 요구사항을 간략화 시키는 그 능력은 리팩토링과는 별개로 그 능력을 키워나가야 하는 방안을 별도로 생각해 보아야 할 것 같다는 생각이 들었다.)  
  
1개의 문을 pass하는 코드. TDD이니 테스트코드부터 작성.
~~~
~~~


## 테스트범위 확인하기
## 소스 리팩토링하기



좋은 테스트케이스는 테스트 메소드 내에 요구사항에 대한 spec이 저절로 명시된다.  
테스트케이스가 더 필요한지 아닐지에 대해서는, TDD방식으로 요구사항을 구현하다보면 저절로 개발자가 파악할 수 있다..  물론 그 기준은 개발자 스스로가 파악하게 되며, (그 판단이 틀릴수도 있다.)  
  
요구사항을 완벽히 충족하였는지에 대한 증명을 할 수 있는 좋은 방법이 TDD. 테스트를 통하여 내가 작성한 코드가 정상적이게 동작하는지를 검증하였기 때문..  





